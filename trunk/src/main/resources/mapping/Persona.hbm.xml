<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
	<!--model.person.Persona root -->
	<class name="model.person.Persona" table="persona">
		 <id name="id" type="long" column="id">
			<generator class="increment"/>
		</id>
	    <property name="nombres" column="nombres" type="string"/>
	    <property name="apellido1" column="apellido1" type="string"/>
	    <property name="apellido2" column="apellido2" type="string"/>
            <property name="telefonoFijo" column="telefonoFijos" type="string"/>
            <property name="telefonomovil" column="telefonomovil" type="string"/>
            <property name="dni" column="dni" type="string"/>
            <property name="nacimiento" column="nacimiento" type="date"/>
	    <property name="provincia" column="provincia" type="string"/>
	    <property name="localidad" column="localidad" type="string"/>
	    <property name="direccion" column="direccion" type="string"/>
   	    <property name="cp" column="cp" type="string"/>
	    
            <property name="email" column="email" type="string"/>
            <property name="paginaWeb" column="paginaWeb" type="string"/>
	    <property name="fax" column="fax" type="string"/>
	    <property name="cargo" column="cargo" type="string"/>
	    <many-to-one name="usuario" column="usuario_id" 	    	    class="model.person.Usuario" lazy="false" cascade="all"/>

            <!-- Subclase Empleado --> 
	    <joined-subclass name="model.person.Empleado" table="empleado">
	    <key column="id"/>
            </joined-subclass>	

		  <!-- Subclase Proveedor --> 
	    <joined-subclass name="model.person.Proveedor" table="proveedor">
	    <key column="id"/>
            </joined-subclass>	

	    <!-- Subclase Cliente -->	
            <joined-subclass name="model.person.Cliente" table="cliente">
	    <key column="id"/>            
            <property name="codigo" column="codigo" type="int"/>
            <property name="registro" column="registro" type="string"/>
            <property name="fechaInscripcion" column="fechaInscripcion" type="date"/>
            <property name="fechaPuestaEnMarcha" column="fechaPuestaEnMarcha" type="date"/>
            <property name="titular" column="titular" type="string"/>
            <property name="direccionTitular" column="direccionTitular" type="string"/>
            <property name="responsable" column="responsable" type="string"/>
            <property name="direccionFacturacion" column="direccionFacturacion" type="boolean"/>
            <property name="cuotaMensual" column="cuotaMensual" type="java.math.BigDecimal"/>
            <set name="estaciones" lazy="false" cascade="all">
    	          <key column="cliente_id"/>			
		  <one-to-many class="model.person.Estacion"/>
	    </set>
	    </joined-subclass>
	    
	    <!-- Subclase Estacion -->	
            <joined-subclass name="model.person.Estacion" table="estacion">
	    <key column="id"/>            
            <property name="tipo" column="tipo" type="string"/>
            <set name="surtidores" lazy="false" cascade="all">
    	          <key column="estacion_id"/>			
		  <one-to-many class="model.person.ElementoSurtidor"/>
	    </set>
	    <set name="tanques" lazy="false" cascade="all">
    	          <key column="tanque_id"/>			
		  <one-to-many class="model.person.ElementoTanque"/>
	    </set>
        <many-to-one name="manometro" column="manometro" class="model.person.ElementoComplejo" lazy="false" cascade="all"/>
        <many-to-one name="compresor" column="compresor"  class="model.person.ElementoComplejo" lazy="false" cascade="all"/>
        <many-to-one name="medicionElectronica" column="medicionElectronica" class="model.person.ElementoComplejo" lazy="false" cascade="all"/>
        <many-to-one name="contraincendio" column="contraincendio" class="model.person.Elemento" lazy="false" cascade="all"/>
	    <many-to-one name="bajaTension" column="bajaTension" class="model.person.Elemento" lazy="false" cascade="all"/>
	    <many-to-one name="instalacionMecanica" column="instalacionMecanica" class="model.person.ElementoInstalacionMecanica" lazy="false" cascade="all"/>     	
            </joined-subclass>	
            	
	</class>
</hibernate-mapping>